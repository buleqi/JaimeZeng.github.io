{"title":"使用 cloudflare workers 加速下载 github 项目文件","uid":"1695aa0b703806bd11679b2909b0d7d9","slug":"2021-09-22-使用-cloudflare-workers-加速下载-github-项目文件","date":"2021-09-22T06:30:21.000Z","updated":"2021-09-22T18:02:07.837Z","comments":true,"path":"api/articles/2021-09-22-使用-cloudflare-workers-加速下载-github-项目文件.json","keywords":null,"cover":[],"content":"<h2 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h2><p><a href=\"https://github.com/hunshcn/gh-proxy\"><img src=\"https://github-readme-stats.vercel.app/api/pin/?username=hunshcn&repo=gh-proxy&show_owner=true&theme=dracula\" alt=\"gh-proxy\"></a></p>\n<ol>\n<li>登录 <a href=\"https://dash.cloudflare.com/?to=/:account/workers\">Cloudflare Workers</a> ；</li>\n<li>取一个子域名，然后点击 <code>Create a Worker</code>创建 Worker；</li>\n<li>左上角修改域名前缀，删除左侧代码框内原有代码，复制 <a href=\"https://cdn.jsdelivr.net/hunshcn/gh-proxy@master/index.js\">index.js</a> 内容到左侧代码框，点击<code>Save and deploy</code> 保存并部署。</li>\n</ol>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><ul>\n<li><code>index.js</code>默认配置下 clone 走 github.com.cnpmjs.org，项目文件会走 jsDeliver，如需走 worker，修改 Config 变量即可</li>\n<li><code>ASSET_URL</code>是静态资源的 url（实际上就是现在显示出来的那个输入框单页面）</li>\n<li><code>PREFIX</code>是前缀，默认（根路径情况为”/“），如果自定义路由为 example.com/gh/*，请将 PREFIX 改为 ‘/gh/‘，注意，少一个杠都会错！</li>\n</ul></blockquote>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"># 网上其他大佬的下载加速站\nhttps:&#x2F;&#x2F;gh.con.sh\nhttps:&#x2F;&#x2F;ghproxy.com\nhttps:&#x2F;&#x2F;pd.zwc365.com\nhttps:&#x2F;&#x2F;download.fastgit.org\nhttps:&#x2F;&#x2F;gh.api.99988866.xyz\nhttps:&#x2F;&#x2F;github.91chifun.workers.dev\nhttps:&#x2F;&#x2F;gh.isteed.cc\nhttps:&#x2F;&#x2F;gh.xiu2.xyz\nhttps:&#x2F;&#x2F;gh.argv.cc\n# 本站\nhttps:&#x2F;&#x2F;gh.zxj.pub</code></pre>\n\n<h3 id=\"合法输入\"><a href=\"#合法输入\" class=\"headerlink\" title=\"合法输入\"></a>合法输入</h3><p>合法输入（以 <a href=\"cloudflare/wrangler\">cloudflare/wrangler</a> 仓库为例）：</p>\n<ul>\n<li>分支源码：<code>https://github.com/cloudflare/wrangler/archive/master.zip</code></li>\n<li>release 源码：<code>https://github.com/cloudflare/wrangler/archive/v1.19.3.tar.gz</code></li>\n<li>release 文件：<code>https://github.com/cloudflare/wrangler/releases/download/v1.19.3/wrangler-v1.19.3-x86_64-apple-darwin.tar.gz</code></li>\n<li>分支文件：<code>https://github.com/cloudflare/wrangler/blob/1.11.0/README.md</code></li>\n<li>commit 文件：<code>https://github.com/cloudflare/wrangler/blob/26ae1992dda31395fcdec5f249/CHANGELOG.md</code></li>\n<li>gist：<code>https://gist.githubusercontent.com/cielpy/351557e6e465c12986419ac5a4dd2568/raw/cmd.py</code></li>\n</ul>\n<h3 id=\"终端下载\"><a href=\"#终端下载\" class=\"headerlink\" title=\"终端下载\"></a>终端下载</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"># 下载分支源码\nwget http:&#x2F;&#x2F;gh.zxj.pub&#x2F;https:&#x2F;&#x2F;github.com&#x2F;cloudflare&#x2F;wrangler&#x2F;archive&#x2F;master.zip\n\n# 下载 release 源码\nwget http:&#x2F;&#x2F;gh.zxj.pub&#x2F;https:&#x2F;&#x2F;github.com&#x2F;cloudflare&#x2F;wrangler&#x2F;archive&#x2F;v1.19.3.tar.gz\n\n# 下载 release 文件\nwget http:&#x2F;&#x2F;gh.zxj.pub&#x2F;https:&#x2F;&#x2F;github.com&#x2F;cloudflare&#x2F;wrangler&#x2F;releases&#x2F;download&#x2F;v1.19.3&#x2F;wrangler-v1.19.3-x86_64-apple-darwin.tar.gz\n\n# 下载 gist 文件\nwget http:&#x2F;&#x2F;gh.zxj.pub&#x2F;https:&#x2F;&#x2F;gist.githubusercontent.com&#x2F;cielpy&#x2F;351557e6e465c12986419ac5a4dd2568&#x2F;raw&#x2F;cmd.py</code></pre>\n\n<h3 id=\"git-克隆推送\"><a href=\"#git-克隆推送\" class=\"headerlink\" title=\"git 克隆推送\"></a>git 克隆推送</h3><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"># 设置自动跳转\ngit config --global http.followRedirects true\n\n# 设定全局参数\n# https:&#x2F;&#x2F;github.com&#x2F;hunshcn&#x2F;gh-proxy&#x2F;issues&#x2F;28#issuecomment-773769630\ngit config --global url.&quot;https:&#x2F;&#x2F;gh.zxj.pub&#x2F;https:&#x2F;&#x2F;github.com&#x2F;&quot;.insteadOf https:&#x2F;&#x2F;github.com&#x2F;\n</code></pre>\n\n<p>配置之后就可以和以前一样使用 git clone/push/pull 操作了～</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>clone 代码时要使用 <code>https://</code> 协议！例如：</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">git clone --depth&#x3D;1 https:&#x2F;&#x2F;github.com&#x2F;cloudflare&#x2F;wrangler.git</code></pre></blockquote>\n<h2 id=\"常见问题\"><a href=\"#常见问题\" class=\"headerlink\" title=\"常见问题\"></a>常见问题</h2><ol>\n<li><p>Github 站点加载速度慢/无法访问时重定向到 Fastgit 站点。</p>\n<p>新建 Bookmark，Name 填 <code>Open in fastgit</code>，URL 填以下内容。</p>\n<pre class=\"line-numbers language-js\" data-language=\"js\"><code class=\"language-js\">javascript: (function () &#123;\n  var url &#x3D; window.location.href;\n  var regEx &#x3D; &#x2F;^(https?\\:\\&#x2F;\\&#x2F;)(www\\.)?(github)\\.(com)\\&#x2F;(.*)$&#x2F;i;\n  if (regEx.test(url)) &#123;\n    url &#x3D; url.replace(regEx, &quot;$1hub.fastgit.org&#x2F;$5&quot;);\n    window.open(url, &quot;_blank&quot;);\n  &#125; else &#123;\n    alert(&quot;Not a Github URL&quot;);\n  &#125;\n&#125;)();</code></pre>\n\n<p>填写之后点击保存。以后在访问的 Github 时遇见加载速度慢/无法访问问题点击书签即可。例如：</p>\n<p>网页：<code>https://github.com/hunshcn/gh-proxy/blob/master/index.js</code>点击书签后会自动切换到 <code>https://hub.fastgit.org/hunshcn/gh-proxy/blob/master/index.js</code>。</p>\n</li>\n<li><p>chrome 浏览器下载 github 资源速度很慢。</p>\n<p>按照 <a href=\"https://www.zxj.guru/post/2021-08-05-%E6%8F%90%E5%8D%87-Chrome-%E4%B8%8B%E8%BD%BD%E9%80%9F%E5%BA%A6\">提升-Chrome-下载速度</a> 配置即可。</p>\n</li>\n</ol>\n","feature":true,"text":"部署 登录 Cloudflare Workers ； 取一个子域名，然后点击 Create a Worker创建 Worker； 左上角修改域名前缀，删除左侧代码框内原有代码，复制 index.js 内容到左侧代码框，点击Save and deploy 保存并部署。 index....","link":"","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[{"name":"Website","slug":"Website","count":1,"path":"api/categories/Website.json"}],"tags":[{"name":"github","slug":"github","count":1,"path":"api/tags/github.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%83%A8%E7%BD%B2\"><span class=\"toc-text\">部署</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%90%88%E6%B3%95%E8%BE%93%E5%85%A5\"><span class=\"toc-text\">合法输入</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%BB%88%E7%AB%AF%E4%B8%8B%E8%BD%BD\"><span class=\"toc-text\">终端下载</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#git-%E5%85%8B%E9%9A%86%E6%8E%A8%E9%80%81\"><span class=\"toc-text\">git 克隆推送</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">常见问题</span></a></li></ol>","author":{"name":"JaimeZeng","slug":"blog-author","avatar":"https://cdn.staticaly.com/gh/JaimeZeng/cdn/main/blog/avatar.png","link":"/","description":"Stay Simple.","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":"https://github.com/JaimeZeng"}}},"mapped":true,"prev_post":{},"next_post":{"title":"Manjaro 安装 v2rayA","uid":"81ab78078b832bda2a4c8add9ba3daa1","slug":"2021-09-02-Manjaro-安装-v2rayA","date":"2021-09-02T03:45:56.000Z","updated":"2021-09-22T18:02:07.837Z","comments":true,"path":"api/articles/2021-09-02-Manjaro-安装-v2rayA.json","keywords":null,"cover":[],"text":" A Linux web GUI client of Project V which supports V2Ray, Xray, SS, SSR, Trojan and Pingtunnel :rocket: v2rayA 是一个易用而强大的，专注于 Linux 的 V2Ray ...","link":"","photos":[],"count_time":{"symbolsCount":"3.4k","symbolsTime":"3 mins."},"categories":[{"name":"Linux","slug":"Linux","count":10,"path":"api/categories/Linux.json"},{"name":"Software","slug":"Software","count":4,"path":"api/categories/Software.json"}],"tags":[{"name":"Manjaro","slug":"Manjaro","count":2,"path":"api/tags/Manjaro.json"}],"author":{"name":"JaimeZeng","slug":"blog-author","avatar":"https://cdn.staticaly.com/gh/JaimeZeng/cdn/main/blog/avatar.png","link":"/","description":"Stay Simple.","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"github":"https://github.com/JaimeZeng"}}},"feature":true}}